library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
Activos <- c("AAPL", "AMZN", "FB", "NFLX", "MSFT")
getSymbols(Activos, from=as.Date("2020-01-01"), to=Sys.Date())
Aple <- Ad(AAPL)
MSC <- Ad(MSFT)
fb <- Ad(FB)
amz <- Ad(AMZN)
Netf <- Ad(NFLX)
PreciosAd <- merge.xts(Aple, amz, fb, Netf, MSC,
join = "inner") #interseccion, solo toma los días donde todos                                            cotizan
Rend <- Return.calculate(PreciosAd, method = "log")[-1] #logN(x2/x1)
View(Rend)
cor.plot(Rend)
Specs_Portfolio <- portfolio.spec(Activos) #genera una lista con los objetivos y restricciones
Specs_Portfolio <- add.constraint(Specs_Portfolio,type = "full_investment")
Specs_Portfolio <- add.constraint(Specs_Portfolio,type = "long_only")
Specs_Portfolio <- add.constraint(Specs_Portfolio, type = "5%")
Specs_Portfolio <- add.objective(Specs_Portfolio, type = "risk", name = "VaR")
Specs_Portfolio <- add.objective(Specs_Portfolio,type = "return",name = "mean") #optimizar a Sharp, en este casdo se debe quitar en "risk"
Specs_Portfolio
Optimum_Portfolio <- optimize.portfolio(Rend, Specs_Portfolio)
#en caso de que no converja, usar ", optimize_method = random"
library(readxl)
library(readxl)
Series <- read_excel("~/Desktop/Gestion de Fondos de Inversión/Semana 5/CAIA/Series.xlsx",
col_types = c("date", "text", "text",
"text", "text", "text", "text", "text",
"text", "text", "text", "text", "text",
"text", "text", "text", "text", "text",
"text", "text", "text", "text", "text",
"text", "text", "text", "text", "text",
"text", "text", "text", "text", "text",
"text", "text", "text", "text"))
View(Series)
bd <- Series
bd[-5,]
View(bd)
library(readxl)
Series <- read_excel("~/Desktop/Gestion de Fondos de Inversión/Semana 5/CAIA/Series.xlsx",
col_types = c("date", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric"))
View(Series)
bd <- Series
column_to_rownames(bd, 1)
bd %>%
remove_rownames %>%
column_to_rownames(var="Dates")
View(bd)
bd %>%
remove_rownames %>%
column_to_rownames(var="Dates")
View(bd)
column_to_rownames(var = "Dates")
column_to_rownames(var = "Dates", data=bd)
bd %>%
column_to_rownames(var = "Dates")
View(bd)
bd2 <- bd[,-1]
View(bd2)
rownames(bd2) <- samp[,1]
rownames(bd2) <- bd[,1]
library(readxl)
Series <- read_excel("~/Desktop/Gestion de Fondos de Inversión/Semana 5/CAIA/Series.xlsx",
col_types = c("date", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric"))
View(Series)
bd <- Series
bd2 <- bd[,-1]
rownames(bd2) <- bd[,1]
View(bd2)
row.names(bd) <- bd$Dates
bd[1] <- NULL
View(bd)
bd <- Series
View(bd)
row.names(bd) <- bd$Dates
View(bd)
bd[-1,]
View(bd)
bd[-1,]
View(bd)
bd <- bd[-1,]
View(bd)
bd <- Series
row.names(bd) <- bd$Dates
bd <- bd[-2,]
View(bd)
row.names(bd) <- bd$Dates
View(bd)
bd %>%
row.names()
View(bd)
library(readxl)
Series <- read_excel("~/Desktop/Gestion de Fondos de Inversión/Semana 5/CAIA/Series.xlsx",
col_types = c("date", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric"))
View(Series)
bd <- Series
bd %>%
column_to_rownames("Dates")
View(bd)
bd <- bd %>%
column_to_rownames("Dates")
View(bd)
library(fPortfolio)
library(PortfolioAnalytics)
var(bd$`AC* MM Equity`)
charts.PerformanceSummary(bd)
bd_Rend <- Return.calculate(bd, method = "discrete")
View(bd_Rend)
bd_Rend <- Return.calculate(bd, method = "discrete")[-1]
View(bd_Rend)
bd <- Series
bd <- bd %>%
column_to_rownames("Dates")
library(fPortfolio)
library(PortfolioAnalytics)
bd_Rend <- Return.calculate(bd, method = "discrete")[-1]
View(bd_Rend)
bd_Rend <- Return.calculate(bd, method = "discrete")[-1]
bd_Rend <- Return.calculate(bd, method = "discrete")[,-1]
View(bd_Rend)
bd_Rend <- bd_Rend[-1]
View(bd_Rend)
na.locf(bd_Rend)
View(bd_Rend)
bd <- Series
View(bd)
bd <- bd %>%
column_to_rownames("Dates")
bd_Rend <- Return.calculate(bd, method = "discrete")[,-1]
View(bd)
View(bd_Rend)
bd_Rend <- Return.calculate(bd, method = "discrete")[-1]
View(bd_Rend)
charts.PerformanceSummary(bd_Rend)
charts.PerformanceSummary(bd_Rend$ALFAA.MM.Equity)
charts.PerformanceSummary(bd_Rend)
bd_Rend <- Return.calculate(bd, method = "log")[-1]
View(bd_Rend)
bd_Rend <- bd_Rend[-1]
View(bd_Rend)
bd_Rend <- Return.calculate(bd, method = "log")[-1,]
View(bd_Rend)
bd_Rend <- Return.calculate(bd, method = "discrete")[-1,]
View(bd_Rend)
charts.PerformanceSummary(bd_Rend)
charts.PerformanceSummary(
R=bd_Rend,
Rf = 0,
main = NULL,
geometric = TRUE,
methods = "none",
width = 0,
event.labels = NULL,
ylog = FALSE,
wealth.index = FALSE,
gap = 12,
begin = c("first", "axis"),
legend.loc = "topleft",
p = 0.95,
plot.engine = "default")
library(quantmod)
chartSeries(bd_Rend)
cov(bd_Rend)
covBD <- cov(bd_Rend)
View(covBD)
covBD <- as.matrix(covBD)
View(covBD)
View(bd_Rend)
chart.VaRSensitivity(bd_Rend)
var.portfolio(bd_Rend)
var.portfolio(bd_Rend, weights = c(1.71, 1.38, 0.73, 13.65, 2.57, 1.21, 2.62, 0.58, 4.69, 0.80, 2.39, 9.14, 2.99, 0.92, 0.66, 2.29, 10.10, 11.26, 1.53, 1.30, 1.79, 0.44, 0.61, 0.58, 0.39, 1.24, 1.65, 1.11, 1.03, 0.70, 0.49, 0.71, 3.28, 0.76, 0.84, 11.85))
charts.PerformanceSummary(bd_Rend)
pesos <- c(1.71, 1.38, 0.73, 13.65, 2.57, 1.21, 2.62, 0.58, 4.69, 0.80, 2.39, 9.14, 2.99, 0.92, 0.66, 2.29, 10.10, 11.26, 1.53, 1.30, 1.79, 0.44, 0.61, 0.58, 0.39, 1.24, 1.65, 1.11, 1.03, 0.70, 0.49, 0.71, 3.28, 0.76, 0.84, 11.85)
chartSeries(bd_Rend)
var.portfolio(bd_Rend, weights = pesos)
chart.VaRSensitivity(bd_Rend)
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR")
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR", legend.loc = "bottomleft")
charts.PerformanceSummary(
R=bd_Rend,
Rf = 0,
main = NULL,
geometric = TRUE,
methods = "none",
width = 0,
event.labels = NULL,
ylog = FALSE,
wealth.index = FALSE,
gap = 12,
begin = c("first", "axis"),
legend.loc = "topleft",
p = 0.95,
plot.engine = "default")
var.portfolio(bd_Rend, weights = pesos)
chartSeries(bd_Rend)
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR", legend.loc = "bottomleft")
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR")
chart.VaRSensitivity(bd_Rend)
chart.VaRSensitivity(bd_Rend, methods = c("GaussianVaR", "ModifiedVaR", "HistoricalVaR"))
VaR(bd_Rend, p=0.95, method = "historical")
var_bd <- VaR(bd_Rend, p=0.95, method = "historical")
View(var_bd)
View(bd)
library(tydiverse)
library(tidyverse)
library(readr)
library(psych)
library(readr)
Escuelas_de_Magdalena_Contreras <- read_csv("~/Downloads/Escuelas_de_Magdalena_Contreras.csv")
View(Escuelas_de_Magdalena_Contreras)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
chart_Series(Portafolio_Tradicional)
View(Portafolio_Tradicional)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional, method = "log")[-1]
chartSeries(Rend_tradicional)
RendPortTrad <- Return.portfolio(R = Rend_tradicional, weights = w)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
View(Portafolio_Tradicional)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional, method = "log")[-1]
RendPortTrad <- Return.portfolio(R = Rend_tradicional, weights = w)
view(RendPortTrad)
chartSeries(Rend_tradicional)
chartSeries(RendPortTrad)
chartSeries(Portafolio_Tradicional)
cor.plot(Rend_tradicional)
var_cov <- as.data.frame(var(Rend_tradicional))
View(var_cov)
Return.cumulative(Rend_tradicional)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
EquityAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma, Rotoplas, Kimberly, Nemaka,
join = "inner") #interseccion, solo toma los días donde todos                                            cotizan
Equity_Rend_log <- Return.calculate(EquityAd, method = "log")[-1] #logN(x2/x1)
View(Equity_Rend_log)
chartSeries(Equity_Rend_log$BSMXB.MX.Adjusted)
chartSeries(EquityAd)
cor.plot(Equity_Rend_log)
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
chartSeries(Equity_Rend_log$BSMXB.MX.Adjusted)
chartSeries(EquityAd)
chartSeries(Equity_Rend_log)
Ad
chartSeries(EquityAd)
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
View(Equity_Rend_log)
View(Equity_Rend_log)
charts.PerformanceSummary(Equity_Rend_log)
charts.PerformanceSummary(Equity_Rend_log, legend.loc = "bottomleft")
charts.PerformanceSummary(Equity_Rend_log, legend.loc = "bottomleft")
charts.PerformanceSummary(Equity_Rend_log, methods = "HistoricalVaR", legend.loc = "bottomleft")
charts.PerformanceSummary(Equity_Rend_log, methods = "HistoricalVaR", p = 0.95, legend.loc = "bottomleft")
plot(density(Equity_Rend_log))
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional,
method = "log")[-1]
RendPortTrad <- Return.portfolio(R = Rend_tradicional,
weights = w)
chartSeries(Rend_tradicional)
chartSeries(RendPortTrad)
chartSeries(Portafolio_Tradicional)
cor.plot(Rend_tradicional)
Return.cumulative(Rend_tradicional)
plot(density(RendPortTrad))
plot(density(RendPortTrad), vline = 0)
VaR(RendPortTrad)
VaR(RendPortTrad, method = "Historical")
VaR(RendPortTrad, method = "historical")
VaR(RendPortTrad, method = "gaussian")
Daily_VaR_Traditional_Portfolio <- VaR(RendPortTrad)*sqrt(1)*1000000
View(Daily_VaR_Traditional_Portfolio)
Yearly_VaR_Traditional_Portfolio <- VaR(RendPortTrad)*sqrt(252)*1000000
View(Yearly_VaR_Traditional_Portfolio)
charts.PerformanceSummary(RendPortTrad)
summary.optimize.portfolio(RendPortTrad)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
EquityAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma, Rotoplas, Kimberly, Nemaka,
join = "inner") #interseccion, solo toma los días donde todos                                            cotizan
Equity_Rend_log <- Return.calculate(EquityAd, method = "log")[-1] #logN(x2/x1)
View(Equity_Rend_log)
chartSeries(EquityAd)
cor.plot(Equity_Rend_log)
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "full_investment")
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "box",
min = c(0.10),
max = c(0.20))
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "weight >= 10%",
name = "Weight")
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "risk",
name = "VaR")
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "full_investment")
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "box",
min = c(0.10),
max = c(0.20))
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "risk",
name = "VaR")
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "return",
name = "mean") #optimizar a Sharp, en este caso se debe quitar en "risk"
Specs_Portfolio
Optimum_Portfolio <- optimize.portfolio(Equity_Rend_log, Specs_Portfolio)
chart.Weights(Optimum_Portfolio)
chart.Weights(Optimum_Portfolio, plot.type = "barplot")
chart.Weights(Optimum_Portfolio, plot.type = "barplot", legend.loc = NULL)
# nuevo objeto para los rendimientos del port
RendOptPort <- Return.portfolio(Equity_Rend_log,
extractWeights(Optimum_Portfolio))
plot(density(RendOptPort))
VaR(RendOptPort)*sqrt(1)*1000000
View(Optimum_Portfolio)
# nuevo objeto para los rendimientos del port
RendOptPort <- Return.portfolio(Equity_Rend_log,
extractWeights(Optimum_Portfolio))
VaR(RendOptPort)*sqrt(1)*1000000
charts.PerformanceSummary(RendOptPort)
Daily_VaR_2_Portfolio <- VaR(RendOptPort)*sqrt(1)*1000000
Yearly_VaR_2_Portfolio <- VaR(RendOptPort)*sqrt(252)*1000000
table.AnnualizedReturns(RendOptPort) #por default esta anualizado
table.AnnualizedReturns(Equity_Rend_log)
table.AnnualizedReturns(RendOptPort) #por default esta anualizado
table.AnnualizedReturns(Equity_Rend_log)
ES(RendOptPort)
table.AnnualizedReturns(RendPortTrad)
library(kableExtra)
library(kableExtra)
library(kableExtra)
RendPortTrad %>%
table.AnnualizedReturns() %>%
kbl()
kbl(table.AnnualizedReturns(RendPortTrad))
table.AnnualizedReturns(RendOptPort)
table.AnnualizedReturns(RendPortTrad)
Alternatives <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX","KC=F", "SB=F", "GC=F", "SI=F", "ZW=F", "FMTY14.MX", "FUNO11.MX", "FIBRAPL14.MX", "FIBRAMQ12.MX") #no deja meter fibra Macquaire
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
Coffee <- Ad(`KC=F`)
Coffee <- Ad(`KC=F`)
Coffee <- Ad("KC=F")
Coffee <- Ad('KC=F')
Coffee <- Ad(´KC=F`)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
