chartSeries(bd_Rend)
var.portfolio(bd_Rend, weights = pesos)
chart.VaRSensitivity(bd_Rend)
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR")
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR", legend.loc = "bottomleft")
charts.PerformanceSummary(
R=bd_Rend,
Rf = 0,
main = NULL,
geometric = TRUE,
methods = "none",
width = 0,
event.labels = NULL,
ylog = FALSE,
wealth.index = FALSE,
gap = 12,
begin = c("first", "axis"),
legend.loc = "topleft",
p = 0.95,
plot.engine = "default")
var.portfolio(bd_Rend, weights = pesos)
chartSeries(bd_Rend)
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR", legend.loc = "bottomleft")
chart.VaRSensitivity(bd_Rend, methods = "HistoricalVaR")
chart.VaRSensitivity(bd_Rend)
chart.VaRSensitivity(bd_Rend, methods = c("GaussianVaR", "ModifiedVaR", "HistoricalVaR"))
VaR(bd_Rend, p=0.95, method = "historical")
var_bd <- VaR(bd_Rend, p=0.95, method = "historical")
View(var_bd)
View(bd)
library(tydiverse)
library(tidyverse)
library(readr)
library(psych)
library(readr)
Escuelas_de_Magdalena_Contreras <- read_csv("~/Downloads/Escuelas_de_Magdalena_Contreras.csv")
View(Escuelas_de_Magdalena_Contreras)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
chart_Series(Portafolio_Tradicional)
View(Portafolio_Tradicional)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional, method = "log")[-1]
chartSeries(Rend_tradicional)
RendPortTrad <- Return.portfolio(R = Rend_tradicional, weights = w)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
View(Portafolio_Tradicional)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional, method = "log")[-1]
RendPortTrad <- Return.portfolio(R = Rend_tradicional, weights = w)
view(RendPortTrad)
chartSeries(Rend_tradicional)
chartSeries(RendPortTrad)
chartSeries(Portafolio_Tradicional)
cor.plot(Rend_tradicional)
var_cov <- as.data.frame(var(Rend_tradicional))
View(var_cov)
Return.cumulative(Rend_tradicional)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
EquityAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma, Rotoplas, Kimberly, Nemaka,
join = "inner") #interseccion, solo toma los días donde todos                                            cotizan
Equity_Rend_log <- Return.calculate(EquityAd, method = "log")[-1] #logN(x2/x1)
View(Equity_Rend_log)
chartSeries(Equity_Rend_log$BSMXB.MX.Adjusted)
chartSeries(EquityAd)
cor.plot(Equity_Rend_log)
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
chartSeries(Equity_Rend_log$BSMXB.MX.Adjusted)
chartSeries(EquityAd)
chartSeries(Equity_Rend_log)
Ad
chartSeries(EquityAd)
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
View(Equity_Rend_log)
View(Equity_Rend_log)
charts.PerformanceSummary(Equity_Rend_log)
charts.PerformanceSummary(Equity_Rend_log, legend.loc = "bottomleft")
charts.PerformanceSummary(Equity_Rend_log, legend.loc = "bottomleft")
charts.PerformanceSummary(Equity_Rend_log, methods = "HistoricalVaR", legend.loc = "bottomleft")
charts.PerformanceSummary(Equity_Rend_log, methods = "HistoricalVaR", p = 0.95, legend.loc = "bottomleft")
plot(density(Equity_Rend_log))
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional,
method = "log")[-1]
RendPortTrad <- Return.portfolio(R = Rend_tradicional,
weights = w)
chartSeries(Rend_tradicional)
chartSeries(RendPortTrad)
chartSeries(Portafolio_Tradicional)
cor.plot(Rend_tradicional)
Return.cumulative(Rend_tradicional)
plot(density(RendPortTrad))
plot(density(RendPortTrad), vline = 0)
VaR(RendPortTrad)
VaR(RendPortTrad, method = "Historical")
VaR(RendPortTrad, method = "historical")
VaR(RendPortTrad, method = "gaussian")
Daily_VaR_Traditional_Portfolio <- VaR(RendPortTrad)*sqrt(1)*1000000
View(Daily_VaR_Traditional_Portfolio)
Yearly_VaR_Traditional_Portfolio <- VaR(RendPortTrad)*sqrt(252)*1000000
View(Yearly_VaR_Traditional_Portfolio)
charts.PerformanceSummary(RendPortTrad)
summary.optimize.portfolio(RendPortTrad)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
EquityAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma, Rotoplas, Kimberly, Nemaka,
join = "inner") #interseccion, solo toma los días donde todos                                            cotizan
Equity_Rend_log <- Return.calculate(EquityAd, method = "log")[-1] #logN(x2/x1)
View(Equity_Rend_log)
chartSeries(EquityAd)
cor.plot(Equity_Rend_log)
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "full_investment")
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "box",
min = c(0.10),
max = c(0.20))
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "weight >= 10%",
name = "Weight")
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "risk",
name = "VaR")
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "full_investment")
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "box",
min = c(0.10),
max = c(0.20))
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "risk",
name = "VaR")
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "return",
name = "mean") #optimizar a Sharp, en este caso se debe quitar en "risk"
Specs_Portfolio
Optimum_Portfolio <- optimize.portfolio(Equity_Rend_log, Specs_Portfolio)
chart.Weights(Optimum_Portfolio)
chart.Weights(Optimum_Portfolio, plot.type = "barplot")
chart.Weights(Optimum_Portfolio, plot.type = "barplot", legend.loc = NULL)
# nuevo objeto para los rendimientos del port
RendOptPort <- Return.portfolio(Equity_Rend_log,
extractWeights(Optimum_Portfolio))
plot(density(RendOptPort))
VaR(RendOptPort)*sqrt(1)*1000000
View(Optimum_Portfolio)
# nuevo objeto para los rendimientos del port
RendOptPort <- Return.portfolio(Equity_Rend_log,
extractWeights(Optimum_Portfolio))
VaR(RendOptPort)*sqrt(1)*1000000
charts.PerformanceSummary(RendOptPort)
Daily_VaR_2_Portfolio <- VaR(RendOptPort)*sqrt(1)*1000000
Yearly_VaR_2_Portfolio <- VaR(RendOptPort)*sqrt(252)*1000000
table.AnnualizedReturns(RendOptPort) #por default esta anualizado
table.AnnualizedReturns(Equity_Rend_log)
table.AnnualizedReturns(RendOptPort) #por default esta anualizado
table.AnnualizedReturns(Equity_Rend_log)
ES(RendOptPort)
table.AnnualizedReturns(RendPortTrad)
library(kableExtra)
library(kableExtra)
library(kableExtra)
RendPortTrad %>%
table.AnnualizedReturns() %>%
kbl()
kbl(table.AnnualizedReturns(RendPortTrad))
table.AnnualizedReturns(RendOptPort)
table.AnnualizedReturns(RendPortTrad)
Alternatives <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX","KC=F", "SB=F", "GC=F", "SI=F", "ZW=F", "FMTY14.MX", "FUNO11.MX", "FIBRAPL14.MX", "FIBRAMQ12.MX") #no deja meter fibra Macquaire
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
Coffee <- Ad(`KC=F`)
Coffee <- Ad(`KC=F`)
Coffee <- Ad("KC=F")
Coffee <- Ad('KC=F')
Coffee <- Ad(´KC=F`)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
EquityAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma, Rotoplas, Kimberly, Nemaka,
join = "inner")
Equity_Rend_log <- Return.calculate(EquityAd, method = "log")[-1]
var_cov <- as.data.frame(var(Equity_Rend_log))
View(var_cov)
hist(Santander)
ggplot(Santander, hist())
ggplot(Santander, type = "hist")
qqnormPlot(Santander)
qqnorm(Santander)
library(quantmod)
library(PerformanceAnalytics)
library(PortfolioAnalytics)
library(DEoptim)
library(fBasics)
library(ghyp)
library(quantmod)
library(PerformanceAnalytics)
library(PortfolioAnalytics)
library(DEoptim)
library(fBasics)
library(ghyp)
##### Define the tokens of the assets #####
Symbols = c("AAPL","AMZN","IBM","MSFT","TSLA")
getSymbols(Symbols)
covnig<-function(R,portfolio){
a<-fit.NIGmv(R,silent=TRUE)
COV<-a@variance
mu<-a@expected.value
mu<-matrix(mu,ncol = 1)
resultado<-list(mu=mu,sigma=COV)
return(resultado)
}
covnig(Returns)
library(quantmod)
library(PerformanceAnalytics)
library(PortfolioAnalytics)
library(DEoptim)
library(fBasics)
library(ghyp)
##### Define the tokens of the assets #####
Symbols = c("AAPL","AMZN","IBM","MSFT","TSLA")
getSymbols(Symbols)
##### Combine the Adjusted Prices into a single matrix #####
Symbols_ad <- NULL
for(i in Symbols){
assign(paste0("Ad_",i),Ad(get(i)))
Symbols_ad <- c(Symbols_ad,paste0("Ad_",i))
}
Portfolio <- merge.xts(get(Symbols_ad[1]),
get(Symbols_ad[2]),
join = "inner")
for(i in 3:length(Symbols_ad)){
Portfolio <- merge.xts(Portfolio,
get(Symbols_ad[i]),
join = "inner")
}
colnames(Portfolio) <- Symbols
##### Compute the returns of the portfolio #####
Returns <- Return.calculate(Portfolio)[-1,]
covnig<-function(R,portfolio){
a<-fit.NIGmv(R,silent=TRUE)
COV<-a@variance
mu<-a@expected.value
mu<-matrix(mu,ncol = 1)
resultado<-list(mu=mu,sigma=COV)
return(resultado)
}
covnig(Returns)
Specs_Port4 <- portfolio.spec(Symbols)
Specs_Port4 <- add.constraint(Specs_Port4,type='full_investment')
Specs_Port4 <- add.constraint(Specs_Port4,type='long_only')
Specs_Port4 <- add.objective(Specs_Port4, type='risk', name='StdDev')
Specs_Port4 <- add.objective(Specs_Port4, type='return', name='mean')
Optimized_Port4 <- optimize.portfolio(Returns,
Specs_Port4,
optimize_method = "random",
trace = TRUE)
chart.Weights(Optimized_Port4)
chart.Weights(Optimized_Port4, plot.type = "barplot")
W_R <- extractWeights(Optimized_Port4)
sum(W_R)
Return_opt4 <- Return.portfolio(Returns,W_R)
table.AnnualizedReturns(Return_opt4,
scale = 252,
geometric = FALSE)
Return.cumulative(Return_opt4,
geometric = FALSE)
chart.RiskReward(Optimized_Port4,
risk.col = 'StdDev',
return.col = 'mean',
chart.assets = T)
title: "Portafolio_in_R_Asesoria"
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(quantmod)
library(PerformanceAnalytics)
library(PortfolioAnalytics)
library(DEoptim)
library(fBasics)
library(ghyp)
library(knitr)
Alternatives <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX",
"CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX",
"NEMAKA.MX","KC=F", "SB=F", "GC=F", "SI=F", "ZW=F",
"FMTY14.MX", "FUNO11.MX", "FIBRAPL14.MX", "FIBRAMQ12.MX")
getSymbols(Alternatives, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
Coffee <- Ad(`KC=F`)
Sugar <- Ad(`SB=F`)
Gold <- Ad(`GC=F`)
Silver <- Ad(`SI=F`)
Wheat <- Ad(`ZW=F`)
FibraMTY <- Ad(FMTY14.MX)
FibraUNO <- Ad(FUNO11.MX)
FibraPrologis <- Ad(FIBRAPL14.MX)
FibraMacquaire <- Ad(FIBRAMQ12.MX)
AlternativesAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma,
Rotoplas, Kimberly, Nemaka, Coffee, Sugar, Gold,
Silver, Wheat, FibraMTY, FibraUNO, FibraPrologis,
FibraMacquaire,
join = "inner")
View(AlternativesAd)
AlternativesReturns <- Return.calculate(AlternativesAd, method = "log")[-1] #logN(x2/x1)
View(AlternativesReturns)
covnig<-function(R,portfolio){
a<-fit.NIGmv(R,silent=TRUE)
COV<-a@variance
mu<-a@expected.value
mu<-matrix(mu,ncol = 1)
resultado<-list(mu=mu,sigma=COV)
return(resultado)
}
covnig(Returns)
covnig(AlternativesReturns)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(knitr)
Tradicional_60_40 <- c("^MXX", "CETETRCISHRS.MX")
getSymbols(Tradicional_60_40, from=as.Date("2017-02-05"), to=Sys.Date())
IPC <- Ad(MXX)
CETES <- Ad(CETETRCISHRS.MX)
na.locf(IPC)
na.locf(CETES)
Portafolio_Tradicional <- merge.xts(IPC, CETES,
join = "inner")
w <- c(0.60, 0.40)
Rend_tradicional <- Return.calculate(Portafolio_Tradicional,
method = "log")[-1]
RendPortTrad <- Return.portfolio(R = Rend_tradicional,
weights = w)
Equity <- c("BSMXB.MX", "VOLARA.MX", "TLEVISACPO.MX", "FEMSAUBD.MX", "CEMEXCPO.MX", "LABB.MX", "AGUA.MX", "KIMBERA.MX", "NEMAKA.MX")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Santander <- Ad(BSMXB.MX)
Volaris <- Ad(VOLARA.MX)
Televisa <- Ad(TLEVISACPO.MX)
FEMSA <- Ad(FEMSAUBD.MX)
Cemex <- Ad(CEMEXCPO.MX)
Genoma <- Ad(LABB.MX)
Rotoplas <- Ad(AGUA.MX)
Kimberly <- Ad(KIMBERA.MX)
Nemaka <- Ad(NEMAKA.MX)
EquityAd <- merge.xts(Santander, Volaris, Televisa, FEMSA, Cemex, Genoma, Rotoplas, Kimberly, Nemaka,
join = "inner") #interseccion, solo toma los días donde todos                                            cotizan
Equity_Rend_log <- Return.calculate(EquityAd, method = "log")[-1] #logN(x2/x1)
Specs_Portfolio <- portfolio.spec(Equity) #genera una lista con los objetivos y restricciones
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "full_investment")
Specs_Portfolio <- add.constraint(Specs_Portfolio,
type = "box",
min = c(0.10),
max = c(0.20))
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "risk",
name = "VaR")
Specs_Portfolio <- add.objective(Specs_Portfolio,
type = "return",
name = "mean") #optimizar a Sharp, en este caso se debe quitar en "risk"
Specs_Portfolio
kable(Specs_Portfolio, "latex")
Optimum_Portfolio <- optimize.portfolio(Equity_Rend_log, Specs_Portfolio)
#en caso de que no converja, usar ", optimize_method = random"
kable(Optimum_Portfolio, "latex")
View(Optimum_Portfolio)
chart.Weights(Optimum_Portfolio, plot.type = "barplot", legend.loc = NULL)
chart1 <- chart.Weights(Optimum_Portfolio, legend.loc = NULL)
kable(chart1)
