import pandas as pd # PANEL DATA ANALYSIS
import seaborn as sns # Plottear cosas bonitas
import matplotlib.pyplot as plt #Ploter tmbn cosas bonitas
import pandas as pd
url='https://risk.edhec.edu/sites/risk/files/indices/Indices/Edhec%20Alternative%20Indices/Web/table/history.csv'
data=pd.read_csv(url, delimiter=';', index_col=0, parse_dates=True)
import pandas as pd # PANEL DATA ANALYSIS
pip instal pandas
pip install pandas
pip install pandas-datareader
` shell pip install pandas-datareader `
py_install("pandas")
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(ghyp)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(ghyp)
library(readxl)
Equity <- c("AMZN", "WM", "NVS", "SAN", "BIMBOA.MX", "C", "NVDA")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Eq_Specs_Port <- portfolio.spec(c("AMZN", "WM", "NVS", "SAN", "BIMBOA.MX", "C", "NVDA"))
##### Add Constraints #####
Eq_Specs_Port <- add.constraint(Eq_Specs_Port,
type="full_investment")
Eq_Specs_Port <- add.constraint(Eq_Specs_Port,
type="long_only")
##### Add Objective #####
Eq_Specs_Port <- add.objective(Eq_Specs_Port,
type="risk",
name="StdDev")
Eq_Specs_Port <- add.objective(Eq_Specs_Port,
type='return',
name='mean')
Eq_Specs_Port
covnig <- function(R,portfolio){
a<-fit.NIGmv(R, silent=TRUE)
COV<-a@variance
mu<-a@expected.value
mu<-matrix(mu, ncol=1)
resultado<-list(mu=mu,
sigma=COV)
return(resultado)
}
Optimized_Port_NIG <- optimize.portfolio(Equity_Returns,
Eq_Specs_Port,
momentFUN = covnig,
optimize_method = "random",
trace = TRUE)
chart.Weights(Optimized_Port_NIG, plot.type = "barplot")
W_R_NIG <- extractWeights(Optimized_Port_NIG)
W_R_NIG
sum(W_R_NIG)
Return_Port_NIG <- Return.portfolio(Equity_Returns, W_R_NIG)
plot(cumsum(Return_Port_NIG))
kable(table.AnnualizedReturns(Return_Port_NIG,
scale = 252,
geometric = FALSE), format = "html")
table.AnnualizedReturns(Return_Port_NIG,
scale = 252,
geometric = FALSE), format = "html")
table.AnnualizedReturns(Return_Port_NIG,
scale = 252,
geometric = FALSE)
Return.cumulative(Return_Port_NIG,
geometric = FALSE)
chart.RiskReward(Optimized_Port_NIG,
risk.col = 'StdDev',
return.col = 'mean',
chart.assets = TRUE)
Commodities <- c("KC=F", "SB=F", "GC=F", "SI=F", "ZW=F", "ZC=F")
getSymbols(Commodities, from=as.Date("2017-02-05"), to=Sys.Date())
# Commodities_Portafolio es una matriz xts. Para graficar sus variables hay que pasarlo a DataFrame
dta_fram_commodities <- as.data.frame(Commodities_Portfolio)
#Debemos crear una nueva columna que sirva de guia con las fechas. La columna "fecha" es igual al index del objeto
dta_fram_commodities <- dta_fram_commodities %>%
mutate(fecha=index(Commodities_Portfolio))
# Ahora se crea una nueva DataFrame con tres columnas
dta_fram_commodities_tidy <- dta_fram_commodities %>%
gather(-fecha, value=Rendimiento,
key=Activo_comm)
dta_fram_commodities_tidy %>%
ggplot(aes(x=fecha, y=Rendimiento, col=Activo_comm))+
geom_line()+
facet_wrap(.~Activo_comm, scales = "free")
View(Ad_C)
# facet_grit: Graficar el Adj. Price, y Rendimiento y … de los activos alternativos
#S&P5 %>%
#  ggplot(aes(Profit, Adj.Close))+
#  geom_point()+
#  facet_wrap(~Industry + Country)
Equuity_Ad <- c(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
# facet_grit: Graficar el Adj. Price, y Rendimiento y … de los activos alternativos
#S&P5 %>%
#  ggplot(aes(Profit, Adj.Close))+
#  geom_point()+
#  facet_wrap(~Industry + Country)
Equity_Ad <- c(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
View(Equity_Ad)
# facet_grit: Graficar el Adj. Price, y Rendimiento y … de los activos alternativos
#S&P5 %>%
#  ggplot(aes(Profit, Adj.Close))+
#  geom_point()+
#  facet_wrap(~Industry + Country)
Equity_Ad <- cbind(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
View(Equity_Ad)
Equity_Ad %>%
vis_miss()
class(Equity_Ad)
na.omit(Equity_Ad)
View(Equity_Ad)
Equity_Ad <- Equity_Ad %>%
vis_miss()
Equity_Ad <- Equity_Ad %>%
omit.na()
Equity_Ad <- Equity_Ad %>%
na.omit()
View(Equity_Ad)
View(Equity_Returns)
View(Equity_Ad)
View(Equity_Portfolio)
Equity_Ad <- Equity_Ad[-1,]
View(Equity_Ad)
Equity_Ad <- c(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
View(Equity_Ad)
View(Equity_Ad)
Equity_Ad <- cbind(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
View(Equity_Ad)
Equity_Ad <- Equity_Ad %>%
na.omit()
Equity_Ad <- Equity_Ad[-1,]
View(Equity_Ad)
Equity_Ad %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("Ad_AMZN", "Ad_BIMBOA.MX", "Ad_C", "Ad_NVDA", "Ad_NVS", "Ad_SAN", "Ad_WM"))
?setNames
library(setNames)
install.packages("setNames")
library(setNames)
library(data.table)
Equity_Ad %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("Ad_AMZN", "Ad_BIMBOA.MX", "Ad_C", "Ad_NVDA", "Ad_NVS", "Ad_SAN", "Ad_WM"))
Equity_Ad <- cbind(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
Equity_Ad <- Equity_Ad %>%
na.omit()
Equity_Ad <- Equity_Ad[-1,]
dta_frm_Equity_Ad <- as.data.frame(Equity_Ad)
View(dta_frm_Equity_Ad)
dta_frm_Equity_Ad %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("Ad_AMZN", "Ad_BIMBOA.MX", "Ad_C", "Ad_NVDA", "Ad_NVS", "Ad_SAN", "Ad_WM"))
dta_frm_Equity_Ad <- dta_frm_Equity_Ad %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("Ad_AMZN", "Ad_BIMBOA.MX", "Ad_C", "Ad_NVDA", "Ad_NVS", "Ad_SAN", "Ad_WM"))
View(dta_frm_Equity_Ad)
View(dta_frm_Equity_Returns)
dta_frm_Equity_Returns <- dta_frm_Equity_Returns %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("AMZN_returns", "BIMBOA.MX_returns", "C_returns", "NVDA_returns", "NVS_returns", "SAN_returns", "WM_returns"))
View(dta_frm_Equity_Returns)
?merge
dta_frm_Equity_graph <- merge(dta_frm_Equity_Ad, dta_frm_Equity_Returns)
View(dta_frm_Equity_graph)
class(dta_frm_Equity_Ad)
Equity_Ad <- cbind(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
Equity_Ad <- Equity_Ad %>%
na.omit()
Equity_Ad <- Equity_Ad[-1,]
dta_frm_Equity_Ad <- as.data.frame(Equity_Ad)
class(Equity_Returns)
dta_frm_Equity_Ad %>%
mutate(fecha=index(Equity_Returns))
View(dta_frm_Equity_Ad)
class(dta_frm_Equity_Ad)
dta_frm_Equity_Ad %>%
mutate(fecha=index(Equity_Returns))
view(dta_frm_Equity_Ad)
dta_frm_Equity_Ad <- dta_frm_Equity_Ad %>%
mutate(fecha=index(Equity_Returns))
View(dta_frm_Equity_Ad)
Equity_Ad <- cbind(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
Equity_Ad <- Equity_Ad %>%
na.omit()
Equity_Ad <- Equity_Ad[-1,]
dta_frm_Equity_Ad <- as.data.frame(Equity_Ad)
dta_frm_Equity_Ad %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("Ad_AMZN", "Ad_BIMBOA.MX", "Ad_C", "Ad_NVDA", "Ad_NVS", "Ad_SAN", "Ad_WM"))
dta_frm_Equity_Returns <- dta_frm_Equity_Returns %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("AMZN_returns", "BIMBOA.MX_returns", "C_returns", "NVDA_returns", "NVS_returns", "SAN_returns", "WM_returns"))
View(dta_frm_Equity_Returns)
class(dta_frm_Equity_Returns)
dta_frm_Equity_graph <- merge(dta_frm_Equity_Ad, dta_frm_Equity_Returns)
class(dta_frm_Equity_graph)
View(dta_frm_Equity_graph)
dta_frm_Equity_graph <- dta_frm_Equity_graph %>%
mutate(fecha=index(Equity_Returns))
Equity_Ad <- cbind(Ad_AMZN, Ad_BIMBOA.MX, Ad_C, Ad_NVDA, Ad_NVS, Ad_SAN, Ad_WM)
Equity_Ad <- Equity_Ad %>%
na.omit()
Equity_Ad <- Equity_Ad[-1,]
dta_frm_Equity_Ad <- as.data.frame(Equity_Ad)
dta_frm_Equity_Ad %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("Ad_AMZN", "Ad_BIMBOA.MX", "Ad_C", "Ad_NVDA", "Ad_NVS", "Ad_SAN", "Ad_WM"))
dta_frm_Equity_Ad <- dta_frm_Equity_Ad %>%
mutate(fecha=index(Equity_Returns))
dta_frm_Equity_Returns <- dta_frm_Equity_Returns %>%
setnames(old = c("AMZN.Adjusted", "BIMBOA.MX.Adjusted", "C.Adjusted", "NVDA.Adjusted", "NVS.Adjusted", "SAN.Adjusted", "WM.Adjusted"), new = c("AMZN_returns", "BIMBOA.MX_returns", "C_returns", "NVDA_returns", "NVS_returns", "SAN_returns", "WM_returns"))
dta_frm_Equity_graph <- merge(dta_frm_Equity_Ad, dta_frm_Equity_Returns)
View(dta_frm_Equity_graph)
# Ahora se crea una nueva DataFrame con tres columnas
dta_frm_Equity_graph_tidy <- dta_frm_Equity_graph %>%
gather(-fecha, value=Rendimiento,
key=Activo_comm)
View(dta_fram_commodities_tidy)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(ghyp)
library(readxl)
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(ghyp)
library(readxl)
Equity <- c("AMZN", "WM", "NVS", "SAN", "BIMBOA.MX", "C", "NVDA")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
install.packages("quantmod")
install.packages("quantmod")
library(tidyverse)
library(quantmod)
library(PortfolioAnalytics)
library(fPortfolio)
library(PerformanceAnalytics)
library(readr)
library(psych)
library(DEoptim)
library(visdat)
library(ghyp)
library(readxl)
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Equity <- c("AMZN", "WM", "NVS", "SAN", "BIMBOA.MX", "C", "NVDA")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Equity_ad <- NULL
for(i in Equity){
assign(paste0("Ad_",i), Ad(get(i)))
Equity_ad <- c(Equity_ad, paste0("Ad_",i))
}
Equity_Portfolio <- merge.xts(get(Equity_ad[1]),
get(Equity_ad[2]),
join = "inner")
for(i in 3:length(Equity_ad)){
Equity_Portfolio <- merge.xts(Equity_Portfolio,
get(Equity_ad[i]),
join = "inner")
}
Equity_Returns <- Return.calculate(Equity_Portfolio)[-1,]
Equity <- c("AMZN", "WM", "NVS", "SAN", "BIMBOA.MX", "C", "NVDA")
getSymbols(Equity, from=as.Date("2017-02-05"), to=Sys.Date())
Equity_ad <- NULL
for(i in Equity){
assign(paste0("Ad_",i), Ad(get(i)))
Equity_ad <- c(Equity_ad, paste0("Ad_",i))
}
Equity_Portfolio <- merge.xts(get(Equity_ad[1]),
get(Equity_ad[2]),
join = "inner")
for(i in 3:length(Equity_ad)){
Equity_Portfolio <- merge.xts(Equity_Portfolio,
get(Equity_ad[i]),
join = "inner")
}
Equity_Returns <- Return.calculate(Equity_Portfolio)[-1,]
